{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ras.local/schemas/radiology.ticket.v1.json",
  "title": "Radiology Ticket v1",
  "type": "object",
  "required": [
    "ticket_id",
    "source_system",
    "category",
    "priority",
    "created_at",
    "skills_required",
    "sla_minutes",
    "provenance"
  ],
  "properties": {
    "ticket_id": {
      "type": "string",
      "pattern": "^[A-Z0-9\\-]+$",
      "description": "Unique identifier of the radiology ticket"
    },
    "source_system": {
      "type": "string",
      "description": "System or PACS that produced this ticket"
    },
    "category": {
      "type": "string",
      "enum": ["CT", "MRI", "X-RAY", "ULTRASOUND", "PET"],
      "description": "Type of imaging study"
    },
    "description": {
      "type": "string",
      "description": "Free-text summary of case or study"
    },
    "priority": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5,
      "description": "1 = highest priority, 5 = lowest"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Time when ticket was created in ISO 8601"
    },
    "skills_required": {
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1,
      "description": "List of subspecialties required"
    },
    "sla_minutes": {
      "type": "integer",
      "minimum": 5,
      "description": "Allowed turnaround time in minutes"
    },
    "provenance": {
      "type": "object",
      "required": ["producer_id", "producer_version"],
      "properties": {
        "producer_id": { "type": "string" },
        "producer_version": { "type": "string" }
      },
      "description": "Metadata about message origin"
    }
  },
  "additionalProperties": true,
  "examples": [
    {
      "ticket_id": "MRI-2025-001",
      "source_system": "EPIC",
      "category": "MRI",
      "description": "MRI brain scan for suspected lesion",
      "priority": 2,
      "created_at": "2025-10-10T08:15:00Z",
      "skills_required": ["Neuro", "MRI"],
      "sla_minutes": 45,
      "provenance": {
        "producer_id": "ingestion-service",
        "producer_version": "1.0.0"
      }
    }
  ]
}
